<div ng-controller="addTaskCtrl">
	<div id="addTaskForm">

		<span ng-model="addOrChange" class="title">{{addOrChange}}</span><br>
		<span class="subtitle">One more step closer.</span>
    
		<form data-ng-submit="create()" name="addTaskForm" novalidate>
			
			<div>
        <label>Project:</label>
        <select id="selProject" ng-change="showUsers()" ng-model="task.currentState.project._id">
            <option ng-repeat="project in projects" value="{{ project._id }}" >{{ project.title }}</option>
        </select>
     </div>
     
     <div>
        <label>Status:</label>
          <select id="selStatus" ng-model="task.currentState.status" name="selStatus">
          <option value="No Status"></option>
          <option value="To Do">To do</option>
          <option value="In Progress">In progress</option>
          <option value="Verify">Verify</option>
          <option value="Done">Done</option>
        </select>      
     </div>
     
     <div>
        <label>Priority:</label>
        <select id="selPriority" value="noPriority" ng-model="task.currentState.priority">
          <option value ="No Priority"></option>
          <option value="Blocker">Blocker</option>
          <option value="Critical">Critical</option>
          <option value="Major">Major</option>
          <option value="Minor">Minor</option>
          <option value="Trivial">Trivial</option>
        </select>      
     </div>
     
     <div>
        <label>Title:</label>
        <input type="text" name="title" ng-model="task.currentState.title" ng-blur="visitedTitle = true" required>
        <span class="validationText" ng-show="addTaskForm.title.$error.required && visitedTitle">Title is required</span>      
     </div>
     
     <div>
        <label> Assigned for:</label>
        <select id="selPriority" ng-model="task.currentState.assignedFor._id">
          <option value="none"></option>
          <option ng-repeat="user in teamMembers" value="{{user._id}}">{{ user.username }}</option>
        </select>
        <span class="validationText" ng-show="teamMembers.length==0">Your project doesn't have any members </span>      
     </div>

     <div>
         <label> Description:</label>
        <textarea name="description" ng-model="task.currentState.description"></textarea>          
     </div>
     
     <div>
        <button ng-click="teamMembers!=0 && addTaskForm.$valid && addTask()">Submit</button>        
     </div>
		</form>
     <div>
        <span ng-bind="error"></span>        
     </div>    
	</div>
</div>